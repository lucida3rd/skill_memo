---------------------------------
  CentOS 運用メモ
    ::Admin= Lucida（lucida3rd@mstdn.mynoghra.jp）
    ::github= https://github.com/lucida3rd/skill_memo
---------------------------------

＜概要＞
CentOS（ver.7）運用時によく使うコマンドや技をまとめます。

◆よく使うコマンド
◆ユーザ管理



---------------------------------
＜注意事項＞
---------------------------------
・斜め読みしないで、各メモの効果、手順をよく確認してください。
  よくわかんないうちは使用しないでください。
・各メモには元ソースのリンクを貼り付けてますので、
  よくわかんないときはそちらも合わせて確認してください。
・このメモを使用したことによる不具合、損害について当方は責任を持ちません。
  全て自己責任でお願いします。
・当メモの質問は受け付けません。自己対応でお願いします。



-----------------------
＜よく使うコマンド＞

ディレクトリ配下
# ls -la

現在のパス
# pwd

ファイルの削除
# rm [名前]

ディレクトリの作成
# mkdir [名前]

ディレクトリの強制削除
# rm -rf [名前]

エラーログ
# cd /var/spool/mail

フォルダ以下の容量
# du -h -d 1 live/public/system/

ディスク容量
# df

3秒ごとにOSで利用しているプロセスの数や状態、またOS全体のシステムリソース状況
# top
　%CPU..CPU使用率
　%MEM..メモリ利用率
　左から7番目の「S」と書かれた列..プロセスの状態
　　R->Running(実行状態もしくは実行可能状態)
　　S->Sleeping(スリープ状態。ネットワークを介したデータ送受信の際もこのステータス)
　　D->Uninterruptible sleep(IO待ち)
　※プロセス状態がDの状態が続いてるプロセスがあればIO待ちによってパフォーマンス遅延が発生している可能性がある

メモリやCPU使用率
# vmstat
　cpu項の「id」列ではアイドル(空いている)割合をパーセントで表示
　「wa」列ではストレージのIO完了待ちを示す。

現在利用しているプロセス・ストッドごとのCPUやメモリ使用率が分かる。
# ps

メモリに特化して詳細を表示
# free
　Mem行のfree列の値は 何の用途にも使っていない物理メモリ量

メモリの詳細がわかる。
# cat /proc/meminfo

実装されている物理メモリの詳細。
# dmidecode --type memory
# dmidecode --type memory | grep Size

CPUの情報。コアごとに情報を出す。
# cat /proc/cpuinfo


-----------------------
＜ユーザ管理＞

参考：
https://qiita.com/araish/items/b6a408e09f34e0845db1
https://qiita.com/emowl/items/7dc09daa408907a3c6e5


ユーザの作成
# useradd <ユーザ名>
　　※ホームディレクトリは/home配下にユーザ名で作成されてしまう

オプションつき
# useradd -d /users/user1 -g 551 -m -u 114514

-d [dir] ログインディレクトリを設定
-g [gid] グループIDを設定
-m ホームディレクトリを作成
-u [uid] ユーザーIDを設定


パスワードの設定
# passwd <ユーザ名>


ホームディレクトリの変更
# usermod -d /home/new-home <ユーザ名>


ユーザ削除
# userdel <ユーザ名>

-r ホームディレクトリも同時に削除


ユーザ一覧
# cat /etc/passwd
名前だけ表示
# cat /etc/passwd|sed -e 's/:.*//g'


グループ一覧
#cat /etc/group


ユーザID、所属グループの確認
# id <ユーザ名>


